<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Credesasq Server</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            color: #333;
        }
        header {
            background-color: #007bff;
            color: white;
            padding: 15px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        header nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            justify-content: center;
        }
        header nav ul li {
            margin: 0 15px;
        }
        header nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: bold;
            transition: color 0.3s;
        }
        header nav ul li a:hover {
            color: #d0e2ff;
        }
        main {
            padding: 20px;
            text-align: center;
            max-width: 800px;
            margin: auto;
        }
        footer {
            background-color: #007bff;
            color: white;
            text-align: center;
            padding: 15px 0;
            position: fixed;
            bottom: 0;
            width: 100%;
            box-shadow: 0 -2px 4px rgba(0,0,0,0.1);
        }
        .donate {
            margin: 20px 0;
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .donate a, .donate button {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .donate a:hover, .donate button:hover {
            background-color: #0056b3;
        }
        .donate form {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .donate form input, .donate form button {
            margin: 5px 0;
            padding: 10px;
            width: 80%;
            max-width: 300px;
            box-sizing: border-box;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .minecraft-info {
            margin: 20px 0;
            padding: 10px;
            background-color: #007bff;
            color: white;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        @media (max-width: 600px) {
            header nav ul {
                flex-direction: column;
            }
            .donate form input, .donate form button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="index.html" id="home-link">Home</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <h1 id="welcome-message">Welcome to Credesasq Server</h1>
        <p id="news-announcement">Latest news and announcements.</p>

        <div class="minecraft-info">
            <h2>Our Minecraft Server</h2>
            <p>IP: <strong>credesasq_server.exaroton.me:32650</strong></p>
        </div>

        <div class="donate">
            <h2 id="donate-title">Balance Replenishment</h2>
            <p id="donate-description">You can replenish the balance on the server:</p>
            <div id="donate-method">
                <!-- Donation method will be displayed here -->
            </div>
            <form id="donate-form">
                <input type="text" id="nickname" name="nickname" placeholder="Your Nickname" required>
                <input type="number" id="amount" name="amount" placeholder="Replenishment Amount" required>
                <input type="email" id="email" name="email" placeholder="Your Email" required>
                <button type="submit">Submit</button>
            </form>
        </div>
    </main>
    <footer>
        <p id="country-info"></p>
        <p>Contacts: stasikgnidan@gmail.com, +380987608895</p>
    </footer>
    <script>
        const apiKey = 'YOUR_GOOGLE_TRANSLATE_API_KEY';

        async function fetchCountryData() {
            try {
                const response = await fetch('https://ipapi.co/json/');
                return await response.json();
            } catch (error) {
                console.error('Error fetching IP data:', error);
                return null;
            }
        }

        async function translateText(text, targetLang) {
            try {
                const response = await fetch(`https://translation.googleapis.com/language/translate/v2?key=${apiKey}`, {
                    method: 'POST',
                    body: JSON.stringify({
                        q: text,
                        target: targetLang,
                        format: 'text'
                    }),
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });
                const data = await response.json();
                return data.data.translations[0].translatedText;
            } catch (error) {
                console.error('Error translating text:', error);
                return text; // повернути оригінальний текст у випадку помилки
            }
        }

        function getCurrencyByCountry(country) {
            const currencyMap = {
                'UA': 'UAH',
                'RU': 'RUB',
                'US': 'USD',
                'GB': 'GBP',
                'SG': 'SGD', // Singapore Dollar
                'JP': 'JPY', // Japanese Yen
                'IN': 'INR', // Indian Rupee
                'AU': 'AUD', // Australian Dollar
                'CA': 'CAD', // Canadian Dollar
                'CN': 'CNY', // Chinese Yuan
                'BR': 'BRL', // Brazilian Real
                // додайте інші країни та їхні валюти тут
            };
            return currencyMap[country] || 'USD'; // За замовчуванням USD, якщо країна не вказана
        }

        function getLanguageByCountry(country) {
            const languageMap = {
                'UA': 'uk',
                'RU': 'ru',
                'US': 'en',
                'GB': 'en',
                'SG': 'en',
                'JP': 'ja',
                'IN': 'hi',
                'AU': 'en',
                'CA': 'en',
                'CN': 'zh',
                'BR': 'pt',
                // додайте інші країни та їхні мови тут
            };
            return languageMap[country] || 'en'; // За замовчуванням англійська, якщо країна не вказана
        }

        async function updatePageContent() {
            const data = await fetchCountryData();
            if (!data) return;

            const country = data.country;
            const currencySymbol = getCurrencyByCountry(country);
            const language = getLanguageByCountry(country);

            const donateDiv = document.getElementById('donate-method');
            const countryInfo = document.getElementById('country-info');
            const welcomeMessage = document.getElementById('welcome-message');
            const newsAnnouncement = document.getElementById('news-announcement');
            const donateTitle = document.getElementById('donate-title');
            const donateDescription = document.getElementById('donate-description');
            const homeLink = document.getElementById('home-link');

            donateDiv.innerHTML = `<p>Transfer funds to the card: 4441 1144 3486 1462 (1 ${currencySymbol} = 1cb)</p>`;
            countryInfo.textContent = `We are from ${data.country_name}`;
            document.documentElement.lang = language;

            welcomeMessage.textContent = await translateText('Welcome to Credesasq Server', language);
            newsAnnouncement.textContent = await translateText('Latest news and announcements.', language);
            donateTitle.textContent = await translateText('Balance Replenishment', language);
            donateDescription.textContent = await translateText('You can replenish the balance on the server:', language);
            homeLink.textContent = await translateText('Home', language);

            // Оновити плейсхолдер для суми поповнення з урахуванням валюти
            document.getElementById('amount').placeholder = await translateText(`Replenishment Amount (${currencySymbol})`, language);
        }

        document.getElementById('donate-form').addEventListener('submit', function(event) {
            event.preventDefault();

            const nickname = document.getElementById('nickname').value;
            const amount = document.getElementById('amount').value;
            const email = document.getElementById('email').value;
            const country = document.documentElement.lang.toUpperCase();

            const mailtoLink = `https://send.monobank.ua/jar/AbnKs1v1mU?amount=${amount}&nickname=${nickname}&email=${email}`;
            window.location.href = mailtoLink;
        });

        updatePageContent();
    </script>
</body>
</html>
